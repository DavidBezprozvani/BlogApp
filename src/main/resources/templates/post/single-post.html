<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Post</title>

    <style>
        html {
            height: 100%;
        }

        body {
            min-height: 100%;
        }

        .container {
            min-height: 100%;
        }
    </style>
</head>
<body>
<div th:replace="fragments/navbar :: menu"></div>

<div class="container">
    <!--Post-->
    <div class="jumbotron">
        <div sec:authorize="hasRole('ADMIN')" style="text-align: end">
            <div>
                <a th:href="@{'/editPost/{id}'(id=${post.id})}" class="col-md-2">
                    <button class="btn btn-bg bg-secondary text-white" th:text="#{table.edit}">Edit</button>
                </a>
                <a sec:authorize="hasRole('ADMIN')" th:href="@{/public/post/delete/{id}(id=${post.id})}">
                    <button class="btn btn-danger" th:text="#{table.delete}">Delete
                    </button>
                </a>
            </div>
        </div>
        <h1 th:text="${post.title}">Title</h1>

        <h4 th:text="${post.body}">Body</h4>
    </div>

    <div id="comment-box">
        <div class="row"><h5>Comments:</h5></div>

        <div sec:authorize="isAuthenticated()" class="row">
            <form method="post">
                <textarea class="col-md-12" placeholder="Comment" name="comment"
                          rows="3" cols="40"></textarea>
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <div class="col-md-1">
                    <button class="btn btn-primary" type="submit">Comment</button>
                </div>
            </form>
        </div>
    </div>

    <div id="comments" class="col" th:each="comment : ${post.comments}">
        <div><strong><a th:text="${comment.user.username} + ':'">User</a></strong></div>
        <p th:text="${comment.body}">comment text</p>
    </div>
</div>


<div th:replace="fragments/footerRelative :: footerRelative"></div>
</div>
</body>
</html>